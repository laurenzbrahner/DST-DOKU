{
  "hash": "29afa361d12059598e7a68d8da890f86",
  "result": {
    "markdown": "# Herausforderungen und Lösungen\n\nIn diesem Projekt bin ich auf einige Herausforderungen gestoßen, da manches doch etwas komplizierter als angenommen war. In diesem Kapitel werde ich diese Herausforderungen schildern und meine Lösungen dazu vorstellen.\n\n## Datensatz und geografische Daten\n\nIch hatte im allgemeinen wenig Probleme mit den Daten. Die Spalten hatten meiner Meinung nach gut verständliche Namen und der Rest der Data-Preparation war auch schnell erledigt. Jedoch ist mir im Laufe des Projekts aufgefallen, dass ich geografische Daten für die Erstellung einer Map brauche. So ist mir die Idee gekommen, das Herkunftsland des Künstlers hinzuzufügen. Manuell hätte dies aber ewig gedauert, also musste eine andere Lösung her. Ich hab mich auf die Suche nach Musik-Apis begeben und bin fündig geworden. Anhand von Musicbrainz konnte ich wie beschrieben in Kapitel 4 das Herkunftsland des Künstlers mit wenig Aufwand hinzufügen.\n\nDas hat auch wunderbar funktioniert, bis ich bei der Erstellung der Map war. Leider haben die Länderbezeichnungen der Musicbrainz Datenbank nicht, mit denen der geopandas Bibliothek übereinstimmt. Aber auch hierfür habe ich eine Lösung gefunden. Ich habe eine Funktion geschrieben, welche die Länderbezeichnungen vergleicht und übereinstimmende oder fehlende Länder ausgibt.\n\nHier ist die Funktion:\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\n\"\"\"\n\n\ndef compare_country_names(df, country_list):\n\n    df_countries = set(df['name'].unique())\n    country_list_set = set(country_list)\n\n    # Finden der Übereinstimmungen und Nichtübereinstimmungen\n    matches = df_countries.intersection(country_list_set)\n    missing = df_countries.difference(country_list_set)\n\n    return matches, missing\n\n\n\n\"\"\"\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```\n\"\\n\\n\\ndef compare_country_names(df, country_list):\\n\\n    df_countries = set(df['name'].unique())\\n    country_list_set = set(country_list)\\n\\n    # Finden der Übereinstimmungen und Nichtübereinstimmungen\\n    matches = df_countries.intersection(country_list_set)\\n    missing = df_countries.difference(country_list_set)\\n\\n    return matches, missing\\n\\n\\n\\n\"\n```\n:::\n:::\n\n\nMithilfe dieser Funktion konnte ich meine Bezeichnungen mappen und somit eine Übereinstimmung erreichen.\n\n## Visualisierungen\n\nDurch die einfache und verständliche Syntax von Altair hatte ich kaum Probleme beim Erstellen der Visualisierungen. Lediglich bei der Erstellung der Map, war es in meinem Fall etwas schwer, eine aussagekräftige Skalierung zu haben. Die Map stellt die Anzahl der Top-Künstler aus dem jeweiligen Land dar, das Problem hierbei war, dass die USA als Ausreißer fast 300 Künstler mehr als das Zweitplatzierte Land, England hatte. Somit war es schwierig, eine Skala zu finden, die den Unterschied trotzdem ersichtlich macht. Ich habe es zuerst mit konditionellem Anzeigen versucht ('alt.Condition') dies hat aber leider nicht funktioniert. Nach längerer Suche bin ich auf logarithmische Skalierung gekommen. Dies war auch sehr einfach in altair umzusetzen, ich musste einfach 'type='log'' in das Scale Prop von altair hinzufügen und schon waren die Unterschiede besser zu erkennen und das Problem war gelöst.\n\n## Quarto Präsentation\n\nAn sich kam ich sehr gut mit Quarto zurecht. Nur hatte ich ein wenig Probleme mit dem Einbauen der Altair-Charts. Ich wollte nämlich einen dunklen Hintergrund und habe, wie in Kapitel 7 schon erwähnt, das Dark Theme benutzt. Nun war aber der weiße Hintergrund der Charts noch zu sehen und soweit ich weiß, gibt es keine Funktion den Chart Transparent zu machen. Hierfür habe ich aber auch eine Lösung gefunden. Mithilfe eines Colorpickers konnte ich die Farbe des Hintergrunds herausfinden und in den 'background' prop der Diagramme einsetzen.\nDiesen Colorpicker habe ich verwendet:\n\n- [Colorpicker](https://imagecolorpicker.com/)\n\nLeider hatte ich auch das Problem, dass die Diagramme in der HTML-Page manchmal nicht angezeigt worden sind. Ich habe mitbekommen, dass dieses Problem auch andere in diesem Kurs hatten. Dafür habe ich keine richtige Lösung gefunden, außer die HTML Datei via GitHub-Pages zu deployen. So wurden die Diagramme eigentlich immer angezeigt.\n\n- [Deployte html Datei meiner Präsentation](https://laurenzbrahner.github.io/quarto_prasi/)\n\nDes Weiteren wurden bei mir manchmal verschiedene Aspekte aus gelayerten Charts nicht angezeigt. Zum Beispiel eine Linie durch den Maximalwert. Ich habe lange gebraucht um das Problem zu lösen, da sie in den Jupyter Notebooks immer angezeigt worden ist. Das Problem war, dass selbst die Linie, welche nur statisch mit einer Steigung von 0 durch beispielsweise y=60 geht, ein Dataframe als Input braucht, um bei quarto angezeigt zu werden.\n\n## Streamlit Dashboard\n\nMit Streamlit hatte ich wirklich kaum Probleme, da die Syntax sehr einfach gehalten ist. Jedoch musste ich auf der ersten Page in den Diagrammen: \"Top-10 Songs nach Streams\" und \"Top-10 Künstler nach Streams“ eine Anpassung vornehmen, die Künstler und die Songnamen sind auf der X-Achse überlappt, dies konnte ich aber durch einfaches Tauschen der Achsen lösen.\n\nDes Weitern musste ich mich für die Erstellung der Diagrammdemo, welche die Anzahl der veröffentlichten Songs pro Monat anzeigt, erstmal in den 'session_state' in Streamlit einlesen. Dies war aber ein minder großes Problem.\n\n",
    "supporting": [
      "herausforderungen_files"
    ],
    "filters": [],
    "includes": {}
  }
}